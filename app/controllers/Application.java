package controllers;

import java.util.ArrayList;
import java.util.List;

import com.amazonaws.auth.BasicAWSCredentials;
import com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient;
import com.amazonaws.services.dynamodbv2.document.DynamoDB;
import com.amazonaws.services.dynamodbv2.document.Item;
import com.amazonaws.services.dynamodbv2.document.Table;
import com.fasterxml.jackson.databind.ObjectMapper;

import dao.DAMgr;
import dao.Malware;
import dao.MalwareDevice;
import play.*;
import play.libs.Json;
import play.mvc.*;

import views.html.*;

public class Application extends Controller {
	public static final String AWS_ACCESS_KEY = "aws.access.key";
	public static final String AWS_SECRET_KEY = "aws.secret.key";
	
	public Result index() {
		List<Malware> malwareCatalog = DAMgr.getMalwareCatalog();
		return ok(index.render(malwareCatalog));
	}
	
	public Result getMalwareDevices(String id) {
		System.out.println("getMalwareDevices " + id);
		//return ok("MALWARE ID: " + id).as("text/html");
		List<MalwareDevice> infectedDevices = DAMgr.getMalwareDevices(id);
		System.out.println(Json.toJson(infectedDevices));
		return ok(Json.toJson(infectedDevices));
	}
}
